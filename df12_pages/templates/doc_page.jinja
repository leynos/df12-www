<!doctype html>
<html lang="en" data-theme="df12">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="assets/site.css" rel="stylesheet" />
  <title>{{ html_title }}</title>
  <style>
    {{ pygments_css }}

    .codehilite {
      background-color: var(--color-neutral);
      border-radius: 0.75rem;
      padding: 1.25rem;
      color: var(--color-neutral-content);
      font-family: "IBM Plex Mono", monospace;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.45);
      overflow: hidden;
    }

    .codehilite pre {
      margin: 0;
      background: transparent;
      font-family: inherit;
      font-size: inherit;
      border: none;
      padding: 0;
      box-shadow: none;
      overflow-x: auto;
    }

    .codehilite__chrome {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.7rem;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.7);
      gap: 1rem;
    }

    .codehilite__language {
      white-space: nowrap;
    }

    .codehilite__copy {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      border-radius: 999px;
      color: var(--color-neutral-content);
      font-family: inherit;
      font-size: 0.65rem;
      text-transform: uppercase;
      padding: 0.2rem 0.9rem;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }

    .codehilite__copy:hover,
    .codehilite__copy:focus-visible {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .codehilite__copy[data-state="copied"] {
      background: var(--color-accent);
      color: var(--color-accent-content);
      border-color: transparent;
    }

    .codehilite__copy-icon {
      width: 0.85rem;
      height: 0.85rem;
      display: block;
    }

    .svg-inline--fa {
      display: inline;
    }
  </style>
</head>
<body class="doc-page">
  {% from "partials/site_macros.jinja" import site_header, site_footer %}
  {% set docs_nav_links = [
    {'label': 'Tools', 'href': 'index.html#systems'},
    {'label': 'Creative', 'href': 'index.html#worlds', 'variant': 'accent'},
    {'label': theme.doc_label, 'href': 'docs.html', 'variant': 'neutral', 'current': True}
  ] %}
  {% set docs_site_name = theme.site_name %}
  {% set docs_blurb = 'Serious systems, playful worlds. We ship tools that cut build times and stories that map the human edge of complex networks.' %}
  {% set docs_oss_links = [
    {'label': 'Limela — licence', 'href': 'https://github.com/leynos/limela/blob/main/LICENSE', 'external': True},
    {'label': 'Netsuke — licence', 'href': 'https://github.com/leynos/netsuke/blob/main/LICENSE', 'external': True},
    {'label': 'mxd — licence', 'href': 'https://github.com/leynos/mxd/blob/main/LICENSE', 'external': True},
    {'label': 'Episodic — licence', 'href': 'https://github.com/leynos/episodic/blob/main/LICENSE', 'external': True}
  ] %}
  {% set docs_contact_links = [
    {'label': 'hello@df12.studio', 'href': 'mailto:hello@df12.studio', 'variant': 'accent'},
    {'label': 'GitHub', 'href': 'https://github.com/leynos', 'variant': 'accent', 'icon': 'carbon:logo-github', 'external': True},
    {'label': 'Bluesky', 'href': 'https://bsky.app/profile/df12.studio', 'variant': 'accent', 'icon': 'carbon:logo-bluesky', 'external': True}
  ] %}
  {% set docs_closing = 'Built for curious builders and storytellers everywhere. ©&nbsp;' ~ generated_at.year ~ '&nbsp;' ~ docs_site_name.replace(' ', '&nbsp;') ~ '.' %}
  <a href="#main-content" class="skip-link sr-only-focusable">Skip to content</a>

{{ site_header('index.html', 'df12', docs_nav_links, 'layout-shell layout-shell--docs') | indent(2, true) }}

  <main id="main-content" class="px-4 pb-24 pt-32">
    <div class="layout-shell layout-shell--docs doc-grid">
      <aside class="doc-sidebar" aria-label="Documentation navigation">
        <div class="doc-sidebar__panel">
          <a href="docs.html" class="doc-sidebar__back">
            <iconify-icon icon="carbon:arrow-left" class="h-4 w-4" aria-hidden="true"></iconify-icon>
            Back to docs
          </a>
          <div>
            <p class="doc-sidebar__eyebrow">{{ page.label }}</p>
            <p class="doc-sidebar__body">{{ page_description }}</p>
          </div>
          <div class="doc-sidebar__groups">
            {% for group in nav_groups %}
              {% set is_active_group = group.slug == section.slug %}
              <div class="doc-nav-group" aria-label="{{ group.label }}">
                {% set primary = group.entries[0] %}
                <h3 class="doc-nav-group__title {{ 'is-active' if is_active_group else '' }}" {% if is_active_group %}aria-current="page"{% endif %}>
                  <a href="{{ primary.href }}">{{ group.label }}</a>
                </h3>
                {% if group.entries | length > 1 %}
                  <ul class="doc-nav__list" role="list">
                    {% for item in group.entries[1:] %}
                      {% set is_active_link = (group.slug == section.slug and item.is_primary) %}
                      <li>
                        <a href="{{ item.href }}"
                           class="doc-nav__link {{ 'doc-nav__link--active' if is_active_link else '' }}"
                           {% if is_active_link %}aria-current="page"{% endif %}>
                          <span>{{ item.label }}</span>
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% endif %}
              </div>
            {% endfor %}
          </div>
          <div>
            <p class="doc-sidebar__section-label">Source</p>
            <a class="inline-flex items-center gap-2 font-semibold text-primary" href="{{ source_url }}" target="_blank" rel="noopener">
              View markdown
              <iconify-icon icon="carbon:arrow-up-right" aria-hidden="true"></iconify-icon>
            </a>
            <p class="mt-1 text-xs text-base-content/60">{{ source_label }}</p>
          </div>
        </div>
      </aside>

      <section class="space-y-6" id="{{ section.slug }}">
        <nav class="doc-mobile-nav" aria-labelledby="mobile-sections-label">
          <p id="mobile-sections-label" class="doc-sidebar__section-label">Contents</p>
          <ul class="doc-nav__list doc-nav__list--mobile" role="list">
            {% for group in nav_groups %}
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">{{ group.label }}</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                  {% for item in group.entries %}
                    <li>
                      <a href="{{ item.href }}" class="doc-nav__link">{{ item.label }}</a>
                    </li>
                  {% endfor %}
                </ul>
              </li>
            {% endfor %}
          </ul>
        </nav>

        <header class="doc-hero" id="doc-title">
          <h1 class="doc-hero__title">{{ section.short_title.rstrip(':') }}</h1>
          <div class="doc-meta-list">
            {% if doc_version %}
              <span class="doc-meta-list__item">Version {{ doc_version }}</span>
            {% endif %}
            <span class="doc-meta-list__item">Updated {{ (doc_updated_at or generated_at).strftime('%b %d, %Y') }}</span>
          </div>
        </header>

        <article class="doc-article">
          {% if section.layout == 'numbered_steps' %}
            {% if section.intro_html %}
              <section class="doc-section">
                <div class="doc-prose">{{ section.intro_html | safe }}</div>
              </section>
            {% endif %}
            <ol class="doc-steps">
              {% for step in section.numbered_steps %}
                <li id="{{ step.anchor }}" class="doc-step">
                  <p class="doc-step__index">Step {{ '%02d' | format(step.number) }}</p>
                  <p class="doc-step__title">{{ step.title }}</p>
                  <div class="mt-4 doc-prose">{{ step.html | safe }}</div>
                </li>
              {% endfor %}
            </ol>
          {% elif section.layout == 'split_panel' %}
            <div class="doc-split">
              <div class="doc-split__panel">
                {% if section.intro_html %}
                  <div class="doc-prose">{{ section.intro_html | safe }}</div>
                {% endif %}
                <div class="doc-prose">{{ section.split_panel.primary_html | safe }}</div>
              </div>
              <div class="doc-split__panel doc-split__panel--code">
                {{ section.split_panel.secondary_html | safe }}
              </div>
            </div>
          {% else %}
            {% if section.intro_html %}
              <section class="doc-section">
                <div class="doc-prose">{{ section.intro_html | safe }}</div>
              </section>
            {% endif %}
            {% if section.subsections %}
              {% for block in section.subsections %}
                <section id="{{ block.anchor }}" class="doc-section">
                  <div class="doc-section__heading">
                    <h2>{{ block.title }}</h2>
                  </div>
                  <div class="doc-prose">{{ block.html | safe }}</div>
                </section>
              {% endfor %}
            {% else %}
              <section class="doc-section">
                <div class="doc-prose">{{ section.default_html | safe }}</div>
              </section>
            {% endif %}
          {% endif %}
        </article>
      </section>
    </div>
  </main>

{{ site_footer(
  docs_site_name,
  docs_blurb,
  'OSS &amp; Licences',
  docs_oss_links,
  'Stay in touch',
  docs_contact_links,
  docs_closing,
  'layout-shell layout-shell--docs grid gap-12 px-6 py-16 md:grid-cols-3 md:px-16'
) | indent(2, true) }}

  <script>
    (() => {
      const blocks = document.querySelectorAll('.codehilite');
      if (!blocks.length) {
        return;
      }

      const formatLanguage = (raw) => {
        const value = (raw || '').trim();
        if (!value || value.toLowerCase() === 'text') {
          return 'Plain Text';
        }
        return value
          .replace(/[._-]+/g, ' ')
          .replace(/\b\w/g, (char) => char.toUpperCase());
      };

      const writeClipboard = async (text) => {
        if (!text) {
          return false;
        }
        try {
          if (navigator.clipboard?.writeText) {
            await navigator.clipboard.writeText(text);
            return true;
          }
        } catch (error) {
          /* fall back */
        }

        try {
          const textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.setAttribute('readonly', 'readonly');
          textarea.style.position = 'absolute';
          textarea.style.left = '-9999px';
          document.body.appendChild(textarea);
          textarea.select();
          const success = document.execCommand('copy');
          document.body.removeChild(textarea);
          return success;
        } catch (error) {
          return false;
        }
      };

      blocks.forEach((block) => {
        if (block.dataset.enhanced === 'true') {
          return;
        }
        const pre = block.querySelector('pre');
        const code = block.querySelector('code') || pre;
        if (!pre || !code) {
          return;
        }

        block.dataset.enhanced = 'true';

        const chrome = document.createElement('div');
        chrome.className = 'codehilite__chrome';

        const languageLabel = document.createElement('span');
        languageLabel.className = 'codehilite__language';
        const lang = block.dataset.language || '';
        const readableLang = formatLanguage(lang);
        languageLabel.textContent = readableLang;

        const copyButton = document.createElement('button');
        copyButton.type = 'button';
        copyButton.className = 'codehilite__copy';
        copyButton.setAttribute('aria-label', `Copy ${readableLang} code snippet`);
        copyButton.innerHTML = `
          <span class="codehilite__copy-icon" aria-hidden="true">
            <iconify-icon icon="carbon:copy" class="h-4 w-4"></iconify-icon>
          </span>
          <span class="codehilite__copy-text">Copy</span>
        `;

        chrome.appendChild(languageLabel);
        chrome.appendChild(copyButton);
        block.insertBefore(chrome, pre);

        const copyTextLabel = copyButton.querySelector('.codehilite__copy-text');
        let resetTimer;

        copyButton.addEventListener('click', async () => {
          const textContent = code.textContent || '';
          const didCopy = await writeClipboard(textContent.trimEnd());
          if (!didCopy) {
            let selectionApplied = false;
            if (window.getSelection && document.createRange) {
              const selection = window.getSelection();
              if (selection) {
                try {
                  const range = document.createRange();
                  range.selectNodeContents(code);
                  selection.removeAllRanges();
                  selection.addRange(range);
                  selectionApplied = true;
                  const focusTarget = block.querySelector('pre');
                  if (focusTarget) {
                    if (focusTarget.tabIndex < 0) {
                      focusTarget.tabIndex = -1;
                    }
                    focusTarget.focus({ preventScroll: true });
                  }
                } catch (err) {
                  selectionApplied = false;
                }
              }
            }
            if (copyTextLabel) {
              copyTextLabel.textContent = selectionApplied
                ? 'Press ⌘/Ctrl+C'
                : 'Select the code and press ⌘/Ctrl+C';
            }
            clearTimeout(resetTimer);
            resetTimer = setTimeout(() => {
              copyButton.removeAttribute('data-state');
              if (copyTextLabel) {
                copyTextLabel.textContent = 'Copy';
              }
            }, 2500);
            return;
          }
          copyButton.dataset.state = 'copied';
          if (copyTextLabel) {
            copyTextLabel.textContent = 'Copied';
          }
          clearTimeout(resetTimer);
          resetTimer = setTimeout(() => {
            copyButton.removeAttribute('data-state');
            if (copyTextLabel) {
              copyTextLabel.textContent = 'Copy';
            }
          }, 2500);
        });
      });
    })();
  </script>
<script
  src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"
  defer
  integrity="sha384-GPb5RlngihS9H0z1D137JsvzmeZ7tCpWEF4t5YDoTZyMsPP8S7h7vFDh4XhheU83"
  crossorigin="anonymous"
></script>
</body>
</html>
