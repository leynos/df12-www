<!doctype html>
<html lang="en" data-theme="df12">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link href="assets/site.css" rel="stylesheet" />
  <title>df12 Productions — Defining configuration structures | Ortho Config</title>
  <style>
    pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.codehilite .hll { background-color: #49483e }
.codehilite { background: #272822; color: #F8F8F2 }
.codehilite .c { color: #959077 } /* Comment */
.codehilite .err { color: #ED007E; background-color: #1E0010 } /* Error */
.codehilite .esc { color: #F8F8F2 } /* Escape */
.codehilite .g { color: #F8F8F2 } /* Generic */
.codehilite .k { color: #66D9EF } /* Keyword */
.codehilite .l { color: #AE81FF } /* Literal */
.codehilite .n { color: #F8F8F2 } /* Name */
.codehilite .o { color: #FF4689 } /* Operator */
.codehilite .x { color: #F8F8F2 } /* Other */
.codehilite .p { color: #F8F8F2 } /* Punctuation */
.codehilite .ch { color: #959077 } /* Comment.Hashbang */
.codehilite .cm { color: #959077 } /* Comment.Multiline */
.codehilite .cp { color: #959077 } /* Comment.Preproc */
.codehilite .cpf { color: #959077 } /* Comment.PreprocFile */
.codehilite .c1 { color: #959077 } /* Comment.Single */
.codehilite .cs { color: #959077 } /* Comment.Special */
.codehilite .gd { color: #FF4689 } /* Generic.Deleted */
.codehilite .ge { color: #F8F8F2; font-style: italic } /* Generic.Emph */
.codehilite .ges { color: #F8F8F2; font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.codehilite .gr { color: #F8F8F2 } /* Generic.Error */
.codehilite .gh { color: #F8F8F2 } /* Generic.Heading */
.codehilite .gi { color: #A6E22E } /* Generic.Inserted */
.codehilite .go { color: #66D9EF } /* Generic.Output */
.codehilite .gp { color: #FF4689; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { color: #F8F8F2; font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #959077 } /* Generic.Subheading */
.codehilite .gt { color: #F8F8F2 } /* Generic.Traceback */
.codehilite .kc { color: #66D9EF } /* Keyword.Constant */
.codehilite .kd { color: #66D9EF } /* Keyword.Declaration */
.codehilite .kn { color: #FF4689 } /* Keyword.Namespace */
.codehilite .kp { color: #66D9EF } /* Keyword.Pseudo */
.codehilite .kr { color: #66D9EF } /* Keyword.Reserved */
.codehilite .kt { color: #66D9EF } /* Keyword.Type */
.codehilite .ld { color: #E6DB74 } /* Literal.Date */
.codehilite .m { color: #AE81FF } /* Literal.Number */
.codehilite .s { color: #E6DB74 } /* Literal.String */
.codehilite .na { color: #A6E22E } /* Name.Attribute */
.codehilite .nb { color: #F8F8F2 } /* Name.Builtin */
.codehilite .nc { color: #A6E22E } /* Name.Class */
.codehilite .no { color: #66D9EF } /* Name.Constant */
.codehilite .nd { color: #A6E22E } /* Name.Decorator */
.codehilite .ni { color: #F8F8F2 } /* Name.Entity */
.codehilite .ne { color: #A6E22E } /* Name.Exception */
.codehilite .nf { color: #A6E22E } /* Name.Function */
.codehilite .nl { color: #F8F8F2 } /* Name.Label */
.codehilite .nn { color: #F8F8F2 } /* Name.Namespace */
.codehilite .nx { color: #A6E22E } /* Name.Other */
.codehilite .py { color: #F8F8F2 } /* Name.Property */
.codehilite .nt { color: #FF4689 } /* Name.Tag */
.codehilite .nv { color: #F8F8F2 } /* Name.Variable */
.codehilite .ow { color: #FF4689 } /* Operator.Word */
.codehilite .pm { color: #F8F8F2 } /* Punctuation.Marker */
.codehilite .w { color: #F8F8F2 } /* Text.Whitespace */
.codehilite .mb { color: #AE81FF } /* Literal.Number.Bin */
.codehilite .mf { color: #AE81FF } /* Literal.Number.Float */
.codehilite .mh { color: #AE81FF } /* Literal.Number.Hex */
.codehilite .mi { color: #AE81FF } /* Literal.Number.Integer */
.codehilite .mo { color: #AE81FF } /* Literal.Number.Oct */
.codehilite .sa { color: #E6DB74 } /* Literal.String.Affix */
.codehilite .sb { color: #E6DB74 } /* Literal.String.Backtick */
.codehilite .sc { color: #E6DB74 } /* Literal.String.Char */
.codehilite .dl { color: #E6DB74 } /* Literal.String.Delimiter */
.codehilite .sd { color: #E6DB74 } /* Literal.String.Doc */
.codehilite .s2 { color: #E6DB74 } /* Literal.String.Double */
.codehilite .se { color: #AE81FF } /* Literal.String.Escape */
.codehilite .sh { color: #E6DB74 } /* Literal.String.Heredoc */
.codehilite .si { color: #E6DB74 } /* Literal.String.Interpol */
.codehilite .sx { color: #E6DB74 } /* Literal.String.Other */
.codehilite .sr { color: #E6DB74 } /* Literal.String.Regex */
.codehilite .s1 { color: #E6DB74 } /* Literal.String.Single */
.codehilite .ss { color: #E6DB74 } /* Literal.String.Symbol */
.codehilite .bp { color: #F8F8F2 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #A6E22E } /* Name.Function.Magic */
.codehilite .vc { color: #F8F8F2 } /* Name.Variable.Class */
.codehilite .vg { color: #F8F8F2 } /* Name.Variable.Global */
.codehilite .vi { color: #F8F8F2 } /* Name.Variable.Instance */
.codehilite .vm { color: #F8F8F2 } /* Name.Variable.Magic */
.codehilite .il { color: #AE81FF } /* Literal.Number.Integer.Long */

    .codehilite {
      background-color: var(--color-neutral);
      border-radius: 0.75rem;
      padding: 1.25rem;
      color: var(--color-neutral-content);
      font-family: "IBM Plex Mono", monospace;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.45);
      overflow: hidden;
    }

    .codehilite pre {
      margin: 0;
      background: transparent;
      font-family: inherit;
      font-size: inherit;
      border: none;
      padding: 0;
      box-shadow: none;
      overflow-x: auto;
    }

    .codehilite__chrome {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 0.7rem;
      text-transform: uppercase;
      color: rgba(255, 255, 255, 0.7);
      gap: 1rem;
    }

    .codehilite__language {
      white-space: nowrap;
    }

    .codehilite__copy {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      border-radius: 999px;
      color: var(--color-neutral-content);
      font-family: inherit;
      font-size: 0.65rem;
      text-transform: uppercase;
      padding: 0.2rem 0.9rem;
      cursor: pointer;
      transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }

    .codehilite__copy:hover,
    .codehilite__copy:focus-visible {
      background: rgba(255, 255, 255, 0.2);
      border-color: rgba(255, 255, 255, 0.6);
    }

    .codehilite__copy[data-state="copied"] {
      background: var(--color-accent);
      color: var(--color-accent-content);
      border-color: transparent;
    }

    .codehilite__copy-icon {
      width: 0.85rem;
      height: 0.85rem;
      display: block;
    }

    .svg-inline--fa {
      display: inline;
    }
  </style>
</head>
<body class="doc-page">
  <a href="#main-content" class="skip-link sr-only-focusable">Skip to content</a>

  <header id="site-header" class="fixed inset-x-0 top-0 z-50 border-b border-base-200 bg-base-100/80 backdrop-blur supports-[backdrop-filter]:bg-base-100/60">
    <div class="layout-shell layout-shell--docs flex w-full items-center justify-between px-4 py-4 md:px-8">
      <a href="index.html" class="group flex items-center gap-3 font-mono text-lg font-bold uppercase tracking-[0.35em] text-base-content">
        <span class="flex h-9 w-9 items-center justify-center transition-transform duration-300 group-hover:rotate-45">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
            <rect x="12" width="16.9706" height="16.9706" transform="rotate(45 12 0)" />
          </svg>
        </span>
        df12
      </a>
      <nav aria-label="Primary navigation" class="hidden items-center gap-8 md:flex">
        <a href="index.html#systems" class="nav-link hit-target">Tools</a>
        <a href="index.html#worlds" class="nav-link hit-target" data-variant="accent">Creative</a>
        <a href="docs.html" class="nav-link hit-target" data-variant="neutral" aria-current="page">Docs</a>
      </nav>
      <div class="md:hidden">
        <details class="dropdown dropdown-end">
          <summary class="btn btn-ghost btn-sm font-mono uppercase tracking-[0.3em]">Menu</summary>
          <ul class="menu dropdown-content menu-sm z-[1] mt-2 w-44 rounded-box bg-base-100 p-2 shadow">
            <li><a href="index.html#systems" class="nav-link hit-target w-full justify-start">Tools</a></li>
            <li><a href="index.html#worlds" class="nav-link hit-target w-full justify-start" data-variant="accent">Creative</a></li>
            <li><a href="docs.html" class="nav-link hit-target w-full justify-start" data-variant="neutral" aria-current="page">Docs</a></li>
          </ul>
        </details>
      </div>
    </div>
  </header>

  <main id="main-content" class="px-4 pb-24 pt-32">
    <div class="layout-shell layout-shell--docs doc-grid">
      <aside class="doc-sidebar" aria-label="Documentation navigation">
        <div class="doc-sidebar__panel">
          <a href="docs.html" class="doc-sidebar__back">
            <iconify-icon icon="carbon:arrow-left" class="h-4 w-4" aria-hidden="true"></iconify-icon>
            Back to docs
          </a>
          <div>
            <p class="doc-sidebar__eyebrow">Ortho Config</p>
            <p class="doc-sidebar__body">Configuration engine inspired by esbuild’s ergonomics—one schema, many surfaces. Generate matching CLI flags, env vars, and config files for Rust services without losing type safety or your mind.
</p>
          </div>
          <div class="doc-sidebar__groups">
              <div class="doc-nav-group" aria-label="Core concepts and motivation">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-core-concepts-and-motivation.html">Core concepts and motivation</a>
                </h3>
                  <ul class="doc-nav__list" role="list">
                      <li>
                        <a href="docs-ortho-config-core-concepts-and-motivation.html#core-concepts-and-motivation-declarative-merging"
                           class="doc-nav__link "
>
                          <span>Declarative merging</span>
                        </a>
                      </li>
                  </ul>
              </div>
              <div class="doc-nav-group" aria-label="Installation and dependencies">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-installation-and-dependencies.html">Installation and dependencies</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Migrating from earlier versions">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-migrating-from-earlier-versions.html">Migrating from earlier versions</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Defining configuration structures">
                <h3 class="doc-nav-group__title is-active" aria-current="page">
                  <a href="docs-ortho-config-defining-configuration-structures.html">Defining configuration structures</a>
                </h3>
                  <ul class="doc-nav__list" role="list">
                      <li>
                        <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-field-level-attributes"
                           class="doc-nav__link "
>
                          <span>Field-level attributes</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-example-configuration-struct"
                           class="doc-nav__link "
>
                          <span>Example configuration struct</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-customising-configuration-discovery"
                           class="doc-nav__link "
>
                          <span>Customising configuration discovery</span>
                        </a>
                      </li>
                  </ul>
              </div>
              <div class="doc-nav-group" aria-label="Loading configuration and precedence rules">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html">Loading configuration and precedence rules</a>
                </h3>
                  <ul class="doc-nav__list" role="list">
                      <li>
                        <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-how-loading-works"
                           class="doc-nav__link "
>
                          <span>How loading works</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-config-path-override"
                           class="doc-nav__link "
>
                          <span>Config path override</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-source-precedence"
                           class="doc-nav__link "
>
                          <span>Source precedence</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-using-defaults-and-optional-fields"
                           class="doc-nav__link "
>
                          <span>Using defaults and optional fields</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-environment-variable-naming"
                           class="doc-nav__link "
>
                          <span>Environment variable naming</span>
                        </a>
                      </li>
                  </ul>
              </div>
              <div class="doc-nav-group" aria-label="Configuration inheritance">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-configuration-inheritance.html">Configuration inheritance</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Dynamic rule tables">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-dynamic-rule-tables.html">Dynamic rule tables</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Ignore patterns">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-ignore-patterns.html">Ignore patterns</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Subcommand configuration">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-subcommand-configuration.html">Subcommand configuration</a>
                </h3>
                  <ul class="doc-nav__list" role="list">
                      <li>
                        <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-how-it-works"
                           class="doc-nav__link "
>
                          <span>How it works</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-example"
                           class="doc-nav__link "
>
                          <span>Example</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-hello-world-walkthrough"
                           class="doc-nav__link "
>
                          <span>Hello world walkthrough</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-dispatching-with-clap-dispatch"
                           class="doc-nav__link "
>
                          <span>Dispatching with `clap‑dispatch`</span>
                        </a>
                      </li>
                  </ul>
              </div>
              <div class="doc-nav-group" aria-label="Error handling">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-error-handling.html">Error handling</a>
                </h3>
                  <ul class="doc-nav__list" role="list">
                      <li>
                        <a href="docs-ortho-config-error-handling.html#error-handling-aggregating-multiple-errors"
                           class="doc-nav__link "
>
                          <span>Aggregating multiple errors</span>
                        </a>
                      </li>
                      <li>
                        <a href="docs-ortho-config-error-handling.html#error-handling-mapping-errors-ergonomically"
                           class="doc-nav__link "
>
                          <span>Mapping errors ergonomically</span>
                        </a>
                      </li>
                  </ul>
              </div>
              <div class="doc-nav-group" aria-label="Additional notes">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-additional-notes.html">Additional notes</a>
                </h3>
              </div>
              <div class="doc-nav-group" aria-label="Conclusion">
                <h3 class="doc-nav-group__title " >
                  <a href="docs-ortho-config-conclusion.html">Conclusion</a>
                </h3>
              </div>
          </div>
          <div>
            <p class="doc-sidebar__section-label">Source</p>
            <a class="inline-flex items-center gap-2 font-semibold text-primary" href="https://raw.githubusercontent.com/leynos/ortho-config/refs/tags/v0.6.0/docs/users-guide.md" target="_blank" rel="noopener">
              View markdown
              <iconify-icon icon="carbon:arrow-up-right" aria-hidden="true"></iconify-icon>
            </a>
            <p class="mt-1 text-xs text-base-content/60">Source material</p>
          </div>
        </div>
      </aside>

      <section class="space-y-6" id="defining-configuration-structures">
        <nav class="doc-mobile-nav" aria-labelledby="mobile-sections-label">
          <p id="mobile-sections-label" class="doc-sidebar__section-label">Contents</p>
          <ul class="doc-nav__list doc-nav__list--mobile" role="list">
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Core concepts and motivation</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-core-concepts-and-motivation.html" class="doc-nav__link">Core concepts and motivation</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-core-concepts-and-motivation.html#core-concepts-and-motivation-declarative-merging" class="doc-nav__link">Declarative merging</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Installation and dependencies</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-installation-and-dependencies.html" class="doc-nav__link">Installation and dependencies</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Migrating from earlier versions</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-migrating-from-earlier-versions.html" class="doc-nav__link">Migrating from earlier versions</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Defining configuration structures</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-defining-configuration-structures.html" class="doc-nav__link">Defining configuration structures</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-field-level-attributes" class="doc-nav__link">Field-level attributes</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-example-configuration-struct" class="doc-nav__link">Example configuration struct</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-defining-configuration-structures.html#defining-configuration-structures-customising-configuration-discovery" class="doc-nav__link">Customising configuration discovery</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Loading configuration and precedence rules</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html" class="doc-nav__link">Loading configuration and precedence rules</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-how-loading-works" class="doc-nav__link">How loading works</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-config-path-override" class="doc-nav__link">Config path override</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-source-precedence" class="doc-nav__link">Source precedence</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-using-defaults-and-optional-fields" class="doc-nav__link">Using defaults and optional fields</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-loading-configuration-and-precedence-rules.html#loading-configuration-and-precedence-rules-environment-variable-naming" class="doc-nav__link">Environment variable naming</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Configuration inheritance</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-configuration-inheritance.html" class="doc-nav__link">Configuration inheritance</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Dynamic rule tables</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-dynamic-rule-tables.html" class="doc-nav__link">Dynamic rule tables</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Ignore patterns</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-ignore-patterns.html" class="doc-nav__link">Ignore patterns</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Subcommand configuration</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-subcommand-configuration.html" class="doc-nav__link">Subcommand configuration</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-how-it-works" class="doc-nav__link">How it works</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-example" class="doc-nav__link">Example</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-hello-world-walkthrough" class="doc-nav__link">Hello world walkthrough</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-subcommand-configuration.html#subcommand-configuration-dispatching-with-clap-dispatch" class="doc-nav__link">Dispatching with `clap‑dispatch`</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Error handling</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-error-handling.html" class="doc-nav__link">Error handling</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-error-handling.html#error-handling-aggregating-multiple-errors" class="doc-nav__link">Aggregating multiple errors</a>
                    </li>
                    <li>
                      <a href="docs-ortho-config-error-handling.html#error-handling-mapping-errors-ergonomically" class="doc-nav__link">Mapping errors ergonomically</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Additional notes</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-additional-notes.html" class="doc-nav__link">Additional notes</a>
                    </li>
                </ul>
              </li>
              <li class="doc-nav-group">
                <h3 class="doc-nav-group__title">Conclusion</h3>
                <ul class="doc-nav__list doc-nav__list--mobile" role="list">
                    <li>
                      <a href="docs-ortho-config-conclusion.html" class="doc-nav__link">Conclusion</a>
                    </li>
                </ul>
              </li>
          </ul>
        </nav>

        <header class="doc-hero" id="doc-title">
          <h1 class="doc-hero__title">Defining configuration structures</h1>
          <div class="doc-meta-list">
              <span class="doc-meta-list__item">Version 0.6.0</span>
            <span class="doc-meta-list__item">Updated Nov 12, 2025</span>
          </div>
        </header>

        <article class="doc-article">
              <section class="doc-section">
                <div class="doc-prose"><p>A configuration is represented by a plain Rust struct. To take advantage of
<code>OrthoConfig</code>, derive the following traits:</p>
<ul>
<li>
<p><code>serde::Deserialize</code> and <code>serde::Serialize</code> – required for deserializing
  values and merging overrides.</p>
</li>
<li>
<p>The derive macro generates a hidden <code>clap::Parser</code> implementation, so
  manual <code>clap</code> annotations are not required in typical use. CLI customization
  is performed using <code>ortho_config</code> attributes such as <code>cli_short</code>, or
  <code>cli_long</code>.</p>
</li>
<li>
<p><code>OrthoConfig</code> – provided by the library. This derive macro generates the code
  to load and merge configuration from multiple sources.</p>
</li>
</ul>
<p>Optionally, the struct can include a <code>#[ortho_config(prefix = "PREFIX")]</code>
attribute. The prefix sets a common string for environment variables and
configuration file names. When the attribute omits a trailing underscore,
<code>ortho_config</code> appends one automatically so environment variables consistently
use <code>&lt;PREFIX&gt;_</code>. Trailing underscores are trimmed and the prefix is lower‑cased
when used to form file names. For example, a prefix of <code>APP</code> results in
environment variables like <code>APP_PORT</code> and file names such as <code>.app.toml</code>.</p></div>
              </section>
                <section id="defining-configuration-structures-field-level-attributes" class="doc-section">
                  <div class="doc-section__heading">
                    <h2>Field-level attributes</h2>
                  </div>
                  <div class="doc-prose"><p>Field attributes modify how a field is sourced or merged:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Behaviour</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default = expr</code></td>
<td>Supplies a default value when no source provides one. The expression can be a literal or a function path.</td>
</tr>
<tr>
<td><code>cli_long = "name"</code></td>
<td>Overrides the automatically generated long CLI flag (kebab-case).</td>
</tr>
<tr>
<td><code>cli_short = 'c'</code></td>
<td>Adds a single-letter short flag for the field.</td>
</tr>
<tr>
<td><code>merge_strategy = "append"</code></td>
<td>For <code>Vec&lt;T&gt;</code> fields, specifies that values from different sources should be concatenated. This is currently the only supported strategy and is the default for vector fields.</td>
</tr>
</tbody>
</table>
<p>Unrecognized keys are ignored by the derive macro for forwards compatibility.
Unknown keys will therefore silently do nothing. Developers who require
stricter validation may add manual <code>compile_error!</code> guards.</p>
<p>Vector append buffers operate on raw JSON values, so element types only need to
implement <code>serde::Deserialize</code>. Deriving <code>serde::Serialize</code> remains useful when
applications serialize configuration back out (for example, to emit defaults),
but it is no longer required merely to opt into the append strategy.</p>
<p>By default, each field receives a long flag derived from its name in kebab‑case
and a short flag. The macro chooses the short flag using these rules:</p>
<ul>
<li>Use the field's first ASCII alphanumeric character.</li>
<li>If that character is already taken or reserved, try its uppercase form.</li>
<li>If both are unavailable, no short flag is assigned; specify <code>cli_short</code> to
  resolve the collision.</li>
</ul>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td>First letter free</td>
<td><code>-p</code></td>
</tr>
<tr>
<td>Lowercase taken; uppercase free</td>
<td><code>-P</code></td>
</tr>
<tr>
<td>Both cases taken</td>
<td>none (set <code>cli_short</code>)</td>
</tr>
<tr>
<td>Explicit override via <code>cli_short</code></td>
<td><code>-r</code></td>
</tr>
</tbody>
</table>
<p>Collisions are evaluated against short flags already assigned within the same
parser, and reserved characters such as clap's <code>-h</code> and <code>-V</code>. A character is
considered taken if it matches either set.</p>
<p>The macro does not scan other characters in the field name when deriving the
short flag. Short flags must be single ASCII alphanumeric characters and may
not use clap's global <code>-h</code> or <code>-V</code> options. Long flags must contain only ASCII
alphanumeric characters or hyphens, must not start with <code>-</code>, cannot be named
<code>help</code> or <code>version</code>, and the macro rejects underscores.</p>
<p>For example, when multiple fields begin with the same character, <code>cli_short</code>
can disambiguate the final field:</p>
<div class="codehilite" data-language="rust"><pre><span></span><code><span class="cp">#[derive(OrthoConfig)]</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">Options</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span><span class="w">                         </span><span class="c1">// -p</span>
<span class="w">    </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span><span class="w">                      </span><span class="c1">// -P</span>
<span class="w">    </span><span class="cp">#[ortho_config(cli_short = &#39;r&#39;)]</span>
<span class="w">    </span><span class="n">peer</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span><span class="w">                      </span><span class="c1">// -r via override</span>
<span class="p">}</span>
</code></pre></div></div>
                </section>
                <section id="defining-configuration-structures-example-configuration-struct" class="doc-section">
                  <div class="doc-section__heading">
                    <h2>Example configuration struct</h2>
                  </div>
                  <div class="doc-prose"><p>The following example illustrates many of these features:</p>
<div class="codehilite" data-language="rust"><pre><span></span><code><span class="w">  </span><span class="k">use</span><span class="w"> </span><span class="n">ortho_config</span><span class="p">::{</span><span class="n">OrthoConfig</span><span class="p">,</span><span class="w"> </span><span class="n">OrthoError</span><span class="p">};</span>
<span class="w">  </span><span class="k">use</span><span class="w"> </span><span class="n">serde</span><span class="p">::{</span><span class="n">Deserialize</span><span class="p">,</span><span class="w"> </span><span class="n">Serialize</span><span class="p">};</span>

<span class="w">  </span><span class="cp">#[derive(Debug, Clone, Deserialize, Serialize, OrthoConfig)]</span>
<span class="w">  </span><span class="c1">// env vars use APP_ (the macro adds the underscore automatically)</span>
<span class="w">  </span><span class="cp">#[ortho_config(prefix = </span><span class="s">&quot;APP&quot;</span><span class="cp">)]</span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">AppConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="sd">/// Logging verbosity</span>
<span class="w">      </span><span class="n">log_level</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Port to bind on – defaults to 8080 when unspecified</span>
<span class="w">    </span><span class="cp">#[ortho_config(default = 8080)]</span>
<span class="w">    </span><span class="n">port</span><span class="p">:</span><span class="w"> </span><span class="kt">u16</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Optional list of features. Values from files, environment and CLI are appended.</span>
<span class="w">    </span><span class="cp">#[ortho_config(merge_strategy = </span><span class="s">&quot;append&quot;</span><span class="cp">)]</span>
<span class="w">    </span><span class="n">features</span><span class="p">:</span><span class="w"> </span><span class="nb">Vec</span><span class="o">&lt;</span><span class="nb">String</span><span class="o">&gt;</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Nested configuration for the database. A separate prefix is used to avoid ambiguity.</span>
<span class="w">    </span><span class="cp">#[serde(flatten)]</span>
<span class="w">    </span><span class="n">database</span><span class="p">:</span><span class="w"> </span><span class="nc">DatabaseConfig</span><span class="p">,</span>

<span class="w">    </span><span class="sd">/// Enable verbose output; also available as -v via cli_short</span>
<span class="w">    </span><span class="cp">#[ortho_config(cli_short = &#39;v&#39;)]</span>
<span class="w">    </span><span class="n">verbose</span><span class="p">:</span><span class="w"> </span><span class="kt">bool</span><span class="p">,</span>
<span class="w">  </span><span class="p">}</span>

<span class="cp">#[derive(Debug, Clone, Deserialize, Serialize, OrthoConfig)]</span>
<span class="cp">#[ortho_config(prefix = </span><span class="s">&quot;DB&quot;</span><span class="cp">)]</span><span class="w">               </span><span class="c1">// used in conjunction with APP_ prefix to form APP_DB_URL</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">DatabaseConfig</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">url</span><span class="p">:</span><span class="w"> </span><span class="nb">String</span><span class="p">,</span>

<span class="w">    </span><span class="cp">#[ortho_config(default = 5)]</span>
<span class="w">    </span><span class="n">pool_size</span><span class="p">:</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="kt">u32</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>

<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">OrthoError</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// Parse CLI arguments and merge with defaults, file and environment</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AppConfig</span><span class="p">::</span><span class="n">load</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">&quot;Final config: {:#?}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="p">);</span>
<span class="w">    </span><span class="nb">Ok</span><span class="p">(())</span>
<span class="p">}</span>
</code></pre></div>

<p><code>clap</code> attributes are not required in general; flags are derived from field
names and <code>ortho_config</code> attributes. In this example, the <code>AppConfig</code> struct
uses a prefix of <code>APP</code>. The <code>DatabaseConfig</code> struct declares a prefix <code>DB</code>,
resulting in environment variables such as <code>APP_DB_URL</code>. The <code>features</code> field
is a <code>Vec&lt;String&gt;</code> and accumulates values from multiple sources rather than
overwriting them.</p></div>
                </section>
                <section id="defining-configuration-structures-customising-configuration-discovery" class="doc-section">
                  <div class="doc-section__heading">
                    <h2>Customising configuration discovery</h2>
                  </div>
                  <div class="doc-prose"><p>Configuration discovery can be tailored per struct using the <code>discovery(...)</code>
attribute. The keys recognised today include:</p>
<ul>
<li><code>app_name</code>: directory name used under XDG and application data folders.</li>
<li><code>env_var</code>: override for the environment variable consulted before discovery
  runs (defaults to <code>&lt;PREFIX&gt;CONFIG_PATH</code>).</li>
<li><code>config_file_name</code>: primary filename searched in platform-specific
  configuration directories (defaults to <code>config.toml</code>).</li>
<li><code>dotfile_name</code>: dotfile name consulted in the current working directory and
  the user's home directory.</li>
<li><code>project_file_name</code>: filename searched within project roots (defaults to the
  dotfile name).</li>
<li><code>config_cli_long</code> / <code>config_cli_short</code>: rename the CLI flag used to provide an
  explicit configuration path.</li>
<li><code>config_cli_visible</code>: when <code>true</code>, the generated CLI flag appears in help
  output instead of remaining hidden.</li>
</ul>
<p>Supplying only the keys you need lets you rename the CLI flag without altering
file discovery, or vice versa. When the attribute is omitted, the defaults
described in <a href="#config-path-override">Config path override</a> continue to apply.</p></div>
                </section>
        </article>
      </section>
    </div>
  </main>

  <footer id="footer" class="border-t border-base-200 bg-base-100">
    <div class="layout-shell layout-shell--docs grid gap-12 px-6 py-16 md:grid-cols-3 md:px-16">
      <div>
        <p class="font-mono text-sm font-semibold tracking-[0.3em] text-base-content/90">df12 Productions</p>
        <p class="mt-4 text-sm text-base-content/90">Serious systems, playful worlds. We ship tools that cut build times and stories that map the human edge of complex networks.</p>
      </div>
      <div>
        <h2>OSS &amp; Licences</h2>
        <ul class="mt-4 space-y-2 text-sm">
          <li><a class="footer-link" href="https://github.com/leynos/limela/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Limela — licence</a></li>
          <li><a class="footer-link" href="https://github.com/leynos/netsuke/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Netsuke — licence</a></li>
          <li><a class="footer-link" href="https://github.com/leynos/mxd/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">mxd — licence</a></li>
          <li><a class="footer-link" href="https://github.com/leynos/episodic/blob/main/LICENSE" target="_blank" rel="noopener noreferrer">Episodic — licence</a></li>
        </ul>
      </div>
      <div>
        <h3>Stay in touch</h3>
        <ul class="mt-4 space-y-2 text-sm">
          <li><a class="footer-link" data-variant="accent" href="mailto:hello@df12.studio">hello@df12.studio</a></li>
          <li>
            <a class="footer-link" data-variant="accent" href="https://github.com/leynos" target="_blank" rel="noopener noreferrer">
              <iconify-icon icon="carbon:logo-github" class="h-4 w-4" aria-hidden="true"></iconify-icon>
              GitHub
            </a>
          </li>
          <li>
            <a class="footer-link" data-variant="accent" href="https://bsky.app/profile/df12.studio" target="_blank" rel="noopener noreferrer">
              <iconify-icon icon="carbon:logo-bluesky" class="h-4 w-4" aria-hidden="true"></iconify-icon>
              Bluesky
            </a>
          </li>
        </ul>
        <p class="mt-4 text-xs text-base-content/80">Built for curious builders and storytellers everywhere. ©&nbsp;2025&nbsp;df12&nbsp;Productions.</p>
      </div>
    </div>
  </footer>

  <script>
    (() => {
      const blocks = document.querySelectorAll('.codehilite');
      if (!blocks.length) {
        return;
      }

      const formatLanguage = (raw) => {
        const value = (raw || '').trim();
        if (!value || value.toLowerCase() === 'text') {
          return 'Plain Text';
        }
        return value
          .replace(/[._-]+/g, ' ')
          .replace(/\b\w/g, (char) => char.toUpperCase());
      };

      const writeClipboard = async (text) => {
        if (!text) {
          return false;
        }
        try {
          if (navigator.clipboard?.writeText) {
            await navigator.clipboard.writeText(text);
            return true;
          }
        } catch (error) {
          /* fall back */
        }

        try {
          const textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.setAttribute('readonly', 'readonly');
          textarea.style.position = 'absolute';
          textarea.style.left = '-9999px';
          document.body.appendChild(textarea);
          textarea.select();
          const success = document.execCommand('copy');
          document.body.removeChild(textarea);
          return success;
        } catch (error) {
          return false;
        }
      };

      blocks.forEach((block) => {
        if (block.dataset.enhanced === 'true') {
          return;
        }
        const pre = block.querySelector('pre');
        const code = block.querySelector('code') || pre;
        if (!pre || !code) {
          return;
        }

        block.dataset.enhanced = 'true';

        const chrome = document.createElement('div');
        chrome.className = 'codehilite__chrome';

        const languageLabel = document.createElement('span');
        languageLabel.className = 'codehilite__language';
        const lang = block.dataset.language || '';
        const readableLang = formatLanguage(lang);
        languageLabel.textContent = readableLang;

        const copyButton = document.createElement('button');
        copyButton.type = 'button';
        copyButton.className = 'codehilite__copy';
        copyButton.setAttribute('aria-label', `Copy ${readableLang} code snippet`);
        copyButton.innerHTML = `
          <span class="codehilite__copy-icon" aria-hidden="true">
            <iconify-icon icon="carbon:copy" class="h-4 w-4"></iconify-icon>
          </span>
          <span class="codehilite__copy-text">Copy</span>
        `;

        chrome.appendChild(languageLabel);
        chrome.appendChild(copyButton);
        block.insertBefore(chrome, pre);

        const copyTextLabel = copyButton.querySelector('.codehilite__copy-text');
        let resetTimer;

        copyButton.addEventListener('click', async () => {
          const textContent = code.textContent || '';
          const didCopy = await writeClipboard(textContent.trimEnd());
          if (!didCopy) {
            let selectionApplied = false;
            if (window.getSelection && document.createRange) {
              const selection = window.getSelection();
              if (selection) {
                try {
                  const range = document.createRange();
                  range.selectNodeContents(code);
                  selection.removeAllRanges();
                  selection.addRange(range);
                  selectionApplied = true;
                  const focusTarget = block.querySelector('pre');
                  if (focusTarget) {
                    if (focusTarget.tabIndex < 0) {
                      focusTarget.tabIndex = -1;
                    }
                    focusTarget.focus({ preventScroll: true });
                  }
                } catch (err) {
                  selectionApplied = false;
                }
              }
            }
            if (copyTextLabel) {
              copyTextLabel.textContent = selectionApplied
                ? 'Press ⌘/Ctrl+C'
                : 'Select the code and press ⌘/Ctrl+C';
            }
            clearTimeout(resetTimer);
            resetTimer = setTimeout(() => {
              copyButton.removeAttribute('data-state');
              if (copyTextLabel) {
                copyTextLabel.textContent = 'Copy';
              }
            }, 2500);
            return;
          }
          copyButton.dataset.state = 'copied';
          if (copyTextLabel) {
            copyTextLabel.textContent = 'Copied';
          }
          clearTimeout(resetTimer);
          resetTimer = setTimeout(() => {
            copyButton.removeAttribute('data-state');
            if (copyTextLabel) {
              copyTextLabel.textContent = 'Copy';
            }
          }, 2500);
        });
      });
    })();
  </script>
<script
  src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"
  defer
  integrity="sha384-GPb5RlngihS9H0z1D137JsvzmeZ7tCpWEF4t5YDoTZyMsPP8S7h7vFDh4XhheU83"
  crossorigin="anonymous"
></script>
</body>
</html>